

<%-include('../layouts/adminHeader') %>
<body class="g-sidenav-show  bg-gray-200">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3   bg-gradient-dark" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0" href="" target="_blank">
        <img src="/assets/img/logo-ct.png" class="navbar-brand-img h-100" alt="main_logo">
        <span class="ms-1 font-weight-bold text-white">Admin Panel</span>
      </a>
    </div>
    <hr class="horizontal light mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto  max-height-vh-100" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/home">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">dashboard</i>
            </div>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/sales-report">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">receipt_long</i>
            </div>
            <span class="nav-link-text ms-1">Sales report</span>
          </a>
        </li>
        <li class="nav-item">

          <!-- <a href="/hi">ividey amarthu</a> -->
          <a class="nav-link text-white " href="/admin/user">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">table_view</i>
            </div>
            <span class="nav-link-text ms-1">User Managment</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/brand">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">receipt_long</i>
            </div>
            <span class="nav-link-text ms-1">Brand Mangement</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/category">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">receipt_long</i>
            </div>
            <span class="nav-link-text ms-1">Catagory Mangement</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/product">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">view_in_ar</i>
            </div>
            <span class="nav-link-text ms-1">Product Mangement</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/order">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">format_textdirection_r_to_l</i>
            </div>
            <span class="nav-link-text ms-1">Order Mangement</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white active bg-gradient-primary" href="/admin/coupon">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">format_textdirection_r_to_l</i>
            </div>
            <span class="nav-link-text ms-1">Coupon Management</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="/admin/offer-banner">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">receipt_long</i>
            </div>
            <span class="nav-link-text ms-1">Banner Mangement</span>
          </a>
        </li>
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs text-white font-weight-bolder opacity-8">Account pages</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="./pages/profile.html">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">person</i>
            </div>
            <span class="nav-link-text ms-1">Profile</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="./pages/sign-in.html">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">login</i>
            </div>
            <span class="nav-link-text ms-1">Sign In</span>
          </a>
        </li>
        
      </ul>
    </div>
  </aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">Pages</a></li>
            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Coupon Management</li>
          </ol>
          <h6 class="font-weight-bolder mb-0">User Management</h6>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <div class="input-group input-group-outline">
              <label class="form-label">Type here...</label>
              <input type="text" class="form-control">
            </div>
          </div>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <section class="cart_area padding_top" id="table">
        <div class="container-fluid py-4">
            <!-- add-category-btn -->
            <div class="">
              <!-- <a href="" class="btn btn-dark">Add Category</a> -->
              <!-- Button trigger modal -->
              <a class="btn btn-primary text-white" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">
                Add Coupon
              </a>
        
              <!-- Modal -->
              <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Coupon details</h5>
                      <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <!-- form-start -->
        
                      <form  action="/admin/add-coupon" method="post" >
                        <div class="form-group">
                          <label for="">Coupon code</label>
                          <input type="text" class="form-control border pe-2 ps-2" id="" placeholder="coupon code" name="coupon_code" required>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="fixedandpercentage" value="fixed" id="flexRadioDefault1">
                            <label class="form-check-label" for="flexRadioDefault1">
                                Fixed
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="fixedandpercentage" value="percentage" id="flexRadioDefault2">
                            <label class="form-check-label" for="flexRadioDefault2">
                                Percentage
                            </label>
                        </div>
        
                        <div class="form-group">
                            <label for="">Amount</label>
                            <input type="number" class="form-control border pe-2 ps-2" id="" placeholder="coupon amount" name="couponamount" required>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="">Min.Cart amount</label>
                                    <input type="number" class="form-control border pe-2 ps-2" id="" placeholder="Min.cart amount" name="cartamount" required>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="">Min.Radeem amount</label>
                                    <input type="number" class="form-control border pe-2 ps-2" id="" placeholder="Min.radeem amount" name="radeemamount" required>
                                </div>
                            </div>
                        </div>
                        
        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="">Start date</label>
                                    <input type="date" class="form-control border pe-2 ps-2" id="" placeholder="start date" name="startdate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="">Expiry date</label>
                                    <input type="date" class="form-control border pe-2 ps-2" id="" placeholder="expiry date" name="expirydate" required>
                                </div>
                            </div>
                        </div>
        
                        <div class="form-group">
                            <label for="">Usage limit</label>
                            <input type="text" class="form-control border pe-2 ps-2" id="" placeholder="limit" name="usagelimit" required>
                        </div>
        
        
        
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                          <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Save changes</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- add-category-btn -->
            <div class="row">
              <div class="col-12">
                <div class="card my-4">
                  <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                    <!-- <div class="bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3">
                      <h6 class="text-white text-capitalize ps-3">Authors table</h6>
                    </div> -->
                  </div>
                  <div class="card-body px-0 pb-2">
                    <div class="table-responsive p-0">
                      <!-- Table-start -->
                     
                     
                     
                      <table class="table align-items-center mb-0 table-hover">
                        <thead>
                          <tr>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">coupon code</th>
                            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Amount</th>
                            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Min.cart amount</th>
                            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Min.radeem amount</th>
                            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Start date</th>
                            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Expiry date</th>
                            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">usage limit</th>
                            <th class=" text-uppercase text-secondary text-secondary text-xxs font-weight-bolder opacity-7">Actions</th>
                          </tr>
                        </thead>
                        
                        <% if (couponsData.length >0) { %>
                         
                        <% for( let i = 0; i < couponsData.length; i++ ) { %>
                          <% console.log(couponsData[i].minRedeemAmount) %>
                          <% console.log(couponsData[i].expiryDate ) %>
                        
                        
                        <tbody>
                          <tr>
                            <td>
                              <div class="d-flex px-2 py-1">
                                <div>
                                  <!-- <img src="/admin/img/coupon.png" class="avatar avatar-sm me-3 border-radius-lg"
                                    alt="user1"> -->
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                  <h6 class="mb-0 text-xs text-sm"><%=couponsData[i].couponCode %> </h6>
                                  <!-- <p class="text-xs text-secondary mb-0">john@creative-tim.com</p> -->
                                </div>
                              </div>
                            </td>
        
                            <td class="align-middle text-center">
                                <p class="text-xs font-weight-bold mb-0"><%=couponsData[i].couponAmount %>-(<%=couponsData[i].couponAmountType %>) </p>
                                
                            </td>
        
                            <td class="align-middle text-center">
                              <p class="text-xs font-weight-bold mb-0"><%=couponsData[i].minCartAmount %> </p>
                              <!-- <p class="text-xs text-secondary mb-0">Organization</p> -->
                            </td>
        
                            <td class="align-middle text-center">
                                <p class="text-xs font-weight-bold mb-0"><%= couponsData[i].minRedeemAmount %> </p>
                                <!-- <p class="text-xs text-secondary mb-0">Organization</p> -->
                            </td>
                            <td class="align-middle text-center">
                              <span class="text-secondary text-xs font-weight-bold"><%=couponsData[i].startDate %> </span>
                            </td>
        
                            <td class="align-middle text-center">
                              <span class="text-secondary text-xs font-weight-bold"><%=couponsData[i].expiryDate%> </span>
                            </td>
        
                            <td class="align-middle text-center">
                                <span class="text-secondary text-xs font-weight-bold"><%=couponsData[i].limit %> </span>
                            </td>
        
                            <td class="align-middle">
                              <a href="/admin/editCoupon/<%=couponsData[i]._id %>" class="btn btn-danger btn-sm align-items-center">EDIT</a>
                              <a href="/admin/deleteCoupon/<%=couponsData[i]._id %>" class="btn btn-danger btn-sm align-items-center">Delete</a>
                            </td>
                          </tr>
        
                        </tbody>
                        <% } %>
        
                        <% }else{ %> 
                            <tbody>
                                <tr>
                                    <h5>Coupons is empty</h5>
                                </tr>
                            </tbody>
        
                         <% } %>    
                      </table>
                      
                      <!-- Table-end -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </section>

      <div class="card">
        <div class="card-body">
          <p class="card-text">Some content here...</p>
          <div class="collapse" id="extra-content">
            <p class="card-text">Extra content that is initially hidden..lorea.
              casjlbcjlsdkbcsncsnc msa mxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxsdkjlsmdanscns cncc Lorem ipsum dolor sit amet consectetur adipisicing elit. Odio veniam facere ex praesentium unde assumenda amet beatae, non consequatur ipsa libero quis rem quisquam eligendi! Aliquam minus molestiae maxime consequuntur? Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam dolore illum neque officiis, veniam, omnis maiores eius voluptates molestiae, laboriosam doloremque autem in architecto. Inventore nam vitae repellendus amet officia.loreu Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis nulla harum, rem quod iure laborum voluptatum illum, odit tempore beatae culpa molestiae quos ipsum reiciendis dignissimos, magnam dolore fuga sit?
            </p>
          </div>
          <a class="btn btn-link stretched-link" data-toggle="collapse" href="#extra-content" aria-expanded="false" aria-controls="extra-content">Show more</a>
        </div>
      </div>
      
  
    
  <!--   Core JS Files   -->
  <script src="/assets/js/core/popper.min.js"></script>
  <script src="/assets/js/core/bootstrap.min.js"></script>
  <script src="/assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="/assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="/assets/js/plugins/chartjs.min.js"></script>
  <script>
 
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="/assets/js/material-dashboard.min.js?v=3.0.0"></script>
</body>

</html>